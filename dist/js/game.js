!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.button=new Audio("sounds/button.wav"),this.border=new Audio("sounds/border.wav"),this.build=new Audio("sounds/build.wav"),this.lose=new Audio("sounds/lose.wav"),this.readyToStart=new Audio("sounds/ready_to_start.wav"),this.levelUp=new Audio("sounds/levelUp.wav"),this.victory=new Audio("sounds/victory.mp3")}var t,n,r;return t=e,(n=[{key:"buttonAudio",value:function(){this.button.currentTime=0,this.button.play()}},{key:"borderAudio",value:function(){this.border.currentTime=0,this.border.play()}},{key:"buildAudio",value:function(){this.build.play()}},{key:"loseAudio",value:function(){this.lose.play()}},{key:"readyToStartAudio",value:function(){this.readyToStart.play()}},{key:"levelUpAudio",value:function(){this.levelUp.play()}},{key:"victoryAudio",value:function(){this.victory.play()}}])&&o(t.prototype,n),r&&o(t,r),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"setCoockie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires=".concat(o.toUTCString());document.cookie="".concat(e,"=").concat(t,";").concat(r)}},{key:"getCoockie",value:function(e){var t=document.cookie.split(";").filter((function(t){return t.includes(e)}));return t.length?t[0].split("=")[1]:null}},{key:"removeCoockie",value:function(e){document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT")}},{key:"pullCoockie",value:function(e){var t=this.getCoockie(e);return this.removeCoockie(e),t}}])&&i(t.prototype,n),o&&i(t,o),e}();function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.coockie=new a}var t,n,o;return t=e,(n=[{key:"deactivate",value:function(e){e.forEach((function(e){e.classList.remove("active")}))}},{key:"active",value:function(e){e.classList.add("active")}},{key:"change",value:function(e,t){this.deactivate(t),this.coockie.setCoockie("theme",e.className),document.body.className=e.className,this.active(e)}},{key:"getTheme",value:function(){return this.coockie.getCoockie("theme")?this.coockie.getCoockie("theme"):"green-red-gray"}}])&&s(t.prototype,n),o&&s(t,o),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.coockie=new a,this.audio=new r}var t,n,o;return t=e,(n=[{key:"setLevel",value:function(e){this.coockie.setCoockie("level",e)}},{key:"getLevel",value:function(){return this.coockie.getCoockie("level")?this.coockie.getCoockie("level"):1}},{key:"up",value:function(){this.setLevel(Number(this.getLevel())+1)}},{key:"animate",value:function(){var e=this,t=document.querySelector(".level strong");this.audio.levelUpAudio(),t.classList.add("up"),this.up(),t.addEventListener("animationend",(function(){t.innerText=Number(e.getLevel()),t.classList.remove("up")}),{once:!0})}}])&&l(t.prototype,n),o&&l(t,o),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"areArraysEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}}])&&d(t.prototype,n),o&&d(t,o),e}();function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moves=0}var t,n,o;return t=e,(n=[{key:"up",value:function(){this.moves+=1}},{key:"clear",value:function(){this.moves=0}},{key:"getMoves",value:function(){return this.moves}}])&&v(t.prototype,n),o&&v(t,o),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlay=document.querySelector(".overlay"),this.btn=document.querySelector(".overlay .btn"),this.title=document.querySelector(".overlay h1"),this.text=document.querySelector(".info-box p.info-text"),this.isSlideIn=!0}var t,n,o;return t=e,(n=[{key:"slideIn",value:function(e,t){var n=this;this.isSlideIn=!0,this.btn.innerText=e.btn,this.title.innerText=e.title,this.text.innerText=e.msg,this.overlay.classList.remove("disable"),this.overlay.classList.remove("out"),this.overlay.classList.add("in"),this.btn.addEventListener("animationend",(function(){n.btn.classList.remove("not-clickable"),"function"==typeof t&&t()}),{once:!0})}},{key:"slideOut",value:function(e){var t=this;this.isSlideIn=!1,this.overlay.classList.add("out"),this.overlay.classList.remove("in"),this.btn.addEventListener("animationend",(function(){t.overlay.classList.add("disable"),"function"==typeof e&&e()}),{once:!0})}}])&&m(t.prototype,n),o&&m(t,o),e}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var w=function(){function e(){b(this,e),this.second=0,this.minutes=0}return g(e,[{key:"format",value:function(e){return this.minutes=Math.floor(e/60),this.second=e%60,this.second<10&&(this.second="0".concat(this.second)),this.minutes<10&&(this.minutes="0".concat(this.minutes)),"".concat(this.minutes,":").concat(this.second)}}]),e}(),k=function(){function e(t){b(this,e),this.countdown=t}return g(e,[{key:"start",value:function(e){var t=this;if(this.interval)throw"timer is already there";var n=new w;this.interval=window.setInterval((function(){if(!t.isPause){if(0===t.countdown)return t.clear();t.countdown-=1,e(n.format(t.countdown))}}),1e3)}},{key:"replay",value:function(){if(!this.isPause)throw"Timer is not paused";this.isPause=!1}},{key:"clear",value:function(){if(this.interval)return clearInterval(this.interval);throw"There is no Timer"}},{key:"pause",value:function(){if(!this.interval)throw"There is no Timer";this.isPause=!0}}]),e}();function L(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.helpers=new f,this.level=new c,this.moves=new h,this.audio=new r,this.overlay=new y,this.config={},this.msgs=["You paased the first level","Good, up to the next level","You did it, next level is waitng","The challenge will be harder","Great! let's play to finish the Game","WOW!!! You surprise me","You won the Game"],this.borders=[],this.boxesContainer=document.querySelector(".boxes"),this.boxes=L(document.querySelectorAll(".boxes .box")),this.bordersContainer=document.querySelector(".borders-container"),this.borderOuting=null,this.gameStarted=!1,this.countdown=null,this.pause=!1,this.columnsAnimated=!1}var t,n,o;return t=e,(n=[{key:"start",value:function(){var e=this;this.config={max_level:7,borders_length:Number(this.level.getLevel())+3,countdown:35*Number(this.level.getLevel()),win_status:[[0,0,Number(this.level.getLevel())+3],[0,Number(this.level.getLevel())+3,0]]},Number(this.level.getLevel())>this.config.max_level||(this.overlay.isSlideIn?this.overlay.slideOut((function(){e.restart()})):this.restart())}},{key:"restart",value:function(){this.columnsAnimated||this.animateColumns(),this.borders.length&&this.removeBorders(),this.generateBorders(),this._countdown(),this._moves(),this.allowBtnsClick(),document.querySelector(".level strong").innerText=this.level.getLevel(),this.gameStarted||(this.gameStarted=!0,this.boxesEvents(),this.btnsEvents())}},{key:"animateColumns",value:function(){var e=this;this.columnsAnimated=!0,this.boxesContainer.classList.add("animate"),this.boxesContainer.classList.add("active"),this.audio.buildAudio(),setTimeout((function(){e.boxesContainer.classList.remove("animate")}),2e3)}},{key:"generateBorders",value:function(){for(var e=1;e<=this.config.borders_length;e+=1){var t=document.createElement("div");t.classList="border border-".concat(e),t.setAttribute("data-index",e),this.borders.push(t)}this.bordersEvents()}},{key:"removeBorders",value:function(){for(var e=0;e<this.borders.length;e+=1)this.borderOut(this.borders[e],e+1);this.borders=[]}},{key:"bordersEvents",value:function(){var e=this;this.borders.forEach((function(t,n){e.borderInAfterOut(t,n),t.addEventListener("dragstart",(function(t){return e.drag(t)})),t.addEventListener("mouseover",(function(t){return e.isBorderAllowToDrag(t)&&!e.pause?e.whenAllowToDrag(t):e.whenNotAllowToDrag(t)})),t.addEventListener("mouseout",(function(){return e.resetBorderStyle(t)}))}))}},{key:"borderIn",value:function(e,t){this.bordersContainer.appendChild(e),e.style.animation="borderIn .5s ".concat(t/10,"s ease forwards"),this.audio.borderAudio()}},{key:"borderOut",value:function(e,t){e.style.left=0,e.style.animation="borderOut .5s ".concat(t/10,"s ease forwards"),e.addEventListener("animationend",(function(){e.parentNode.removeChild(e)}),{once:!0}),this.borderOuting=e}},{key:"borderInAfterOut",value:function(e,t){var n=this;this.borderOuting?this.borderOuting.addEventListener("animationend",(function(){n.borderIn(e,t)}),{once:!0}):this.borderIn(e,t)}},{key:"isBorderAllowToDrop",value:function(e,t){return null===t||e.dataset.index<t.dataset.index}},{key:"isBorderAllowToDrag",value:function(e){return e.target.dataset.index===e.target.parentElement.firstChild.dataset.index}},{key:"resetBorderStyle",value:function(e){e.classList.remove("on-transfer"),e.style.animation="",e.style.left="0"}},{key:"allowBtnsClick",value:function(){document.querySelectorAll("button").forEach((function(e){return e.classList.remove("not-clickable")}))}},{key:"disableBtnsClick",value:function(){document.querySelectorAll("button").forEach((function(e){return e.classList.add("not-clickable")}))}},{key:"btnsEvents",value:function(){var e=this;document.querySelector(".control-btns .pause").addEventListener("click",(function(){return e._pause()})),document.querySelector(".control-btns .new").addEventListener("click",(function(){e._finish(null),e.start()}))}},{key:"boxesEvents",value:function(){var e=this;this.boxes.forEach((function(t){t.addEventListener("dragenter",(function(t){return e.whenInterToBox(t)})),t.addEventListener("dragleave",(function(t){return e.whenLeaveBox(t)})),t.addEventListener("dragover",(function(t){return e.dragover(t)})),t.addEventListener("drop",(function(t){return e.drop(t)}))}))}},{key:"whenInterToBox",value:function(e){e.path.find((function(e){return"box"===e.classList[0]})).classList.add("hover")}},{key:"whenLeaveBox",value:function(e){e.path.find((function(e){return"box"===e.classList[0]})).classList.remove("hover")}},{key:"dragover",value:function(e){e.preventDefault()}},{key:"drag",value:function(e){if(!this.pause&&this.isBorderAllowToDrag(e)){var t=document.querySelector("div[data-index='".concat(e.target.dataset.index,"']"));e.dataTransfer.setData("text",e.target.dataset.index),t.classList.add("on-transfer")}}},{key:"drop",value:function(e){e.preventDefault();var t=e.path.find((function(e){return"box"===e.classList[0]})),n=t.querySelector(".borders-container"),o=e.dataTransfer.getData("text"),r=document.querySelector("div[data-index='".concat(o,"']"));t.classList.remove("hover"),this.resetBorderStyle(r),this.isBorderAllowToDrop(r,n.firstChild)&&(n.insertBefore(r,n.firstChild),this.audio.buttonAudio(),this.moves.up(),this._moves(),this.isWin()&&this.won())}},{key:"whenAllowToDrag",value:function(e){e.target.setAttribute("draggable",!0)}},{key:"whenNotAllowToDrag",value:function(e){e.target.setAttribute("draggable",!1)}},{key:"isWin",value:function(){for(var e=this.boxes.map((function(e){return e.querySelector(".borders-container").childElementCount})),t=0;t<this.config.win_status.length;t+=1)if(this.helpers.areArraysEqual(this.config.win_status[t],e))return!0;return!1}},{key:"won",value:function(){if(this.isWinTheHoleGame())return this.wonTheHoleGame();this.level.animate(),this._finish("Got to the level ".concat(this.level.getLevel()))}},{key:"isWinTheHoleGame",value:function(){return this.config.max_level===Number(this.level.getLevel())}},{key:"wonTheHoleGame",value:function(){this.audio.victoryAudio(),this._finish("Restart the Game"),this.level.setLevel(1)}},{key:"losed",value:function(){this._finish("Try Again","Ohh, Good luck next Game"),this.audio.loseAudio()}},{key:"_finish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.msgs[this.level.getLevel()-1];this.pause=!1,document.querySelector(".control-btns .pause").innerText="Pause",e&&this.overlay.slideIn({btn:e,title:t,msg:"Your Moves are ".concat(this.moves.getMoves(),", You took ").concat(this.config.countdown-this.countdown.countdown," Seconds")}),this.countdown.clear(),this.moves.clear(),this.disableBtnsClick()}},{key:"_countdown",value:function(){var e=this;this.countdown=new k(this.config.countdown);var t=document.querySelector(".moves-countdown .countdown span");t.innerText="00:00",this.countdown.start((function(n){if(t.innerText=n,"00:00"===n)return e.losed()}))}},{key:"_moves",value:function(){document.querySelector(".moves-countdown .moves span").innerText=this.moves.getMoves()}},{key:"_pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.gameStarted)return!1;this.pause=!0;var t="Replay",n="You paused the Game",o="Click Replay to continue";null!=e&&(t=e.btn,n=e.title,o=e.msg),this.overlay.slideIn({btn:t,title:n,msg:o}),this.countdown.pause()}},{key:"replay",value:function(){var e=this;if(!this.gameStarted)return!1;this.pause=!1,this.overlay.slideOut((function(){e.countdown.replay()}))}}])&&T(t.prototype,n),o&&T(t,o),e}();function x(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(){if(/Google Inc/.test(navigator.vendor)){var e=new r,t=new u,n=new c,o=new y,i=new S,a=document.querySelectorAll(".btn, .control-themes span, .about-the-game span"),s=document.querySelector(".overlay .btn"),l=document.querySelectorAll(".control-themes span"),d=document.querySelector(".about-the-game span"),f=!0;return document.body.classList=t.getTheme(),x(l).filter((function(e){return e.classList[0]===t.getTheme()}))[0].classList.add("active"),document.querySelector(".level strong").innerText=n.getLevel(),a.forEach((function(t){t.addEventListener("click",(function(){e.buttonAudio()}))})),l.forEach((function(e){e.addEventListener("click",(function(){t.change(e,l)}))})),s.onclick=function(){if(f=!0,!i.gameStarted)return i.start();i.replay()},d.onclick=function(){if(f){f=!1;var e="Start",t="Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ulabore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. Atvero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.";if(i.gameStarted&&(e="Replay",!i.pause))return i._pause({btn:e,title:"About The Game",msg:t});o.slideOut((function(){o.slideIn({btn:e,title:"About The Game",msg:t})}))}},!1}document.body.innerHTML='<h1 class="not-chrome">Please use Google Chrome</h1>'}()}]);